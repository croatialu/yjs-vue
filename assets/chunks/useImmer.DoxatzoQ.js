import{b as x,Y as M,c as Z,a as we}from"./index.vue_vue_type_script_setup_true_lang.CjTB_519.js";import{G as Ne}from"./framework.B_uwAT6x.js";var o=(e=>(e.NONE="none",e.INSERT="insert",e.UPDATE="update",e.DELETE="delete",e.PENDING="pending",e))(o||{});function L(e){return U(e)||G(e)||e instanceof Object}function U(e){return Array.isArray(e)}function G(e){return typeof e=="string"}function oe(e){return!U(e)&&!G(e)}function F(e,t){return G(e)&&G(t)?Ae(e,t):U(e)&&U(t)?Oe(e,t):oe(e)&&oe(t)?pe(e,t):[]}function Ae(e,t){if(e===t)return[];if(e.length===0)return t.split("").map((n,r)=>[o.INSERT,r,n]);if(t.length===0)return e.split("").map(()=>[o.DELETE,0,void 0]);if(ze(e,t)){const n=e.length,r=t.length,i=n>=r;return i?ue(t,e,i):ue(e,t,i)}else{const n=e.split("").map(()=>[o.DELETE,0,void 0]),r=t.split("").map((i,s)=>[o.INSERT,s,i]);return n.concat(r)}}function Oe(e,t){const n=[];let r=0,i=0;for(let s=0;s<e.length;s++){const f=e[s],c=s+i;if(t[c]===void 0)n.push([o.DELETE,s,void 0]);else if(L(f)&&L(t[c])){const a=F(f,t[c]),u=typeof t[c+1]>"u"?[]:F(f,t[c+1]);typeof t[c+1]<"u"&&u.length===0?(n.push([o.INSERT,s,t[c]]),r+=2,i++):(a.length!==0&&n.push([o.PENDING,s,a]),r++)}else f!==t[c]&&f===t[c+1]?(n.push([o.INSERT,c,t[c]]),r+=2,i++):(f!==t[c]&&f!==t[c+1]&&n.push([o.UPDATE,c,t[c]]),r++)}return r<t.length&&t.slice(e.length).forEach((s,f)=>n.push([o.INSERT,r+f,s])),n}function pe(e,t){const n=[];return Object.entries(e).forEach(([r,i])=>{!(r in t)&&!(i instanceof Function)&&n.push([o.DELETE,r,void 0])}),Object.entries(t).forEach(([r,i])=>{if(!(r in e))n.push([o.INSERT,r,i]);else if(L(e[r])&&L(i)){const s=F(e[r],i);s.length!==0&&n.push([o.PENDING,r,s])}else e[r]!==i&&n.push([o.UPDATE,r,i])}),n}function ze(e,t){const n=e.split(""),r=t.split("");let i=!1;for(const s of n)i=i||r.includes(s);return i}function ue(e,t,n){const r=e.length,i=t.length,s=r,f=i-r,c=r+i+1,a=[];for(let l=0;l<c;l++)a[l]=-1;const u=[];for(let l=0;l<c;l++)u[l]=-1;const h=[],_=(l,fe,ce)=>{let z=Math.max(fe,ce),k=z-l;for(;k<r&&z<i&&e[k]===t[z];)k++,z++;return u[l+s]=h.length,h[h.length]={x:k,y:z,k:fe>ce?u[l+s-1]:u[l+s+1]},z};let g=-1;do{g++;for(let l=-g;l<f;l++)a[l+s]=_(l,a[l+s-1]+1,a[l+s+1]);for(let l=f+g;l>f;l--)a[l+s]=_(l,a[l+s-1]+1,a[l+s+1]);a[f+s]=_(f,a[f+s-1]+1,a[f+s+1])}while(a[f+s]!==i);let P=u[f+s];const d=[];for(;P!==-1;)d[d.length]={x:h[P].x,y:h[P].y},P=h[P].k;const D=[];let O=0,p=0,S=-1;for(let l=d.length-1;l>=0;l--)for(;O<=d[l].x||p<=d[l].y;)d[l].y-d[l].x>p-O?(n?D[D.length]=[o.DELETE,S,void 0]:(D[D.length]=[o.INSERT,S,t[p-1]],S++),p++):d[l].y-d[l].x<p-O?(n?(D[D.length]=[o.INSERT,S,e[O-1]],S++):D[D.length]=[o.DELETE,S,void 0],O++):(O++,p++,S++);return D}function j(e){const t=new x;return e.forEach(n=>{Array.isArray(n)?t.push([j(n)]):n instanceof Object?t.push([Y(n)]):typeof n=="string"?t.push([b(n)]):t.push([n])}),t}function Y(e){const t=new M;return Object.entries(e).forEach(([n,r])=>{Array.isArray(r)?t.set(n,j(r)):r instanceof Object?t.set(n,Y(r)):typeof r=="string"?t.set(n,b(r)):t.set(n,r)}),t}function b(e){return new Z(e)}function le(e,t){F(e.toJSON(),t).forEach(([r,i,s])=>{switch(r){case o.INSERT:case o.UPDATE:if(!(s instanceof Function))if(e instanceof M)typeof s=="string"?e.set(i,b(s)):Array.isArray(s)?e.set(i,j(s)):s instanceof Object?e.set(i,Y(s)):e.set(i,s);else if(e instanceof x){const f=i;r===o.UPDATE&&e.delete(f),typeof s=="string"?e.insert(f,[b(s)]):Array.isArray(s)?e.insert(f,[j(s)]):s instanceof Object?e.insert(f,[Y(s)]):e.insert(f,[s])}else e instanceof Z&&e.insert(i,s);break;case o.DELETE:if(e instanceof M)e.delete(i);else if(e instanceof x){const f=i;e.delete(e.length<=f?e.length-1:f)}else e instanceof Z&&e.delete(i,1);break;case o.PENDING:(e instanceof M||e instanceof x)&&le(e.get(i),t[i]);break}})}function Ke(e,t){const n=F(e,t),r=(c,a)=>{if(typeof c=="string")return f(c,a);if(Array.isArray(c))return i(c,a);if(c instanceof Object)return s(c,a)},i=(c,a)=>a.sort(([,u],[,h])=>Math.sign(u-h)).reduce((u,[h,_,g])=>{switch(h){case o.INSERT:return u.splice(_,0,g),u;case o.UPDATE:return u[_]=g,u;case o.PENDING:return u[_]=r(c[_],g),u;case o.DELETE:return u.splice(_,1),u;case o.NONE:default:return u}},c),s=(c,a)=>a.reduce((u,[h,_,g])=>{switch(h){case o.INSERT:case o.UPDATE:return u[_]=g,u;case o.PENDING:return u[_]=r(c[_],g),u;case o.DELETE:return delete u[_],u;case o.NONE:default:return u}},c),f=(c,a)=>a.reduce((u,[h,_,g])=>{switch(h){case o.INSERT:{const P=u.slice(0,_),d=u.slice(_);return P+g+d}case o.DELETE:{const P=u.slice(0,_),d=u.slice(_+1);return P+d}default:return u}},c);return n.length===0?e:r(e,n)}function We(e,t){return we().get(e,t)}var Ee=Symbol.for("immer-nothing"),ae=Symbol.for("immer-draftable"),y=Symbol.for("immer-state");function m(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var I=Object.getPrototypeOf;function R(e){return!!e&&!!e[y]}function N(e){var t;return e?ge(e)||Array.isArray(e)||!!e[ae]||!!((t=e.constructor)!=null&&t[ae])||q(e)||H(e):!1}var Ie=Object.prototype.constructor.toString();function ge(e){if(!e||typeof e!="object")return!1;const t=I(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Ie}function K(e,t){J(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function J(e){const t=e[y];return t?t.type_:Array.isArray(e)?1:q(e)?2:H(e)?3:0}function V(e,t){return J(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function me(e,t,n){const r=J(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Re(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function q(e){return e instanceof Map}function H(e){return e instanceof Set}function w(e){return e.copy_||e.base_}function v(e,t){if(q(e))return new Map(e);if(H(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&ge(e))return I(e)?{...e}:Object.assign(Object.create(null),e);const n=Object.getOwnPropertyDescriptors(e);delete n[y];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const s=r[i],f=n[s];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(n[s]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[s]})}return Object.create(I(e),n)}function ie(e,t=!1){return X(e)||R(e)||!N(e)||(J(e)>1&&(e.set=e.add=e.clear=e.delete=Fe),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>ie(r,!0))),e}function Fe(){m(2)}function X(e){return Object.isFrozen(e)}var Ce={};function A(e){const t=Ce[e];return t||m(0,e),t}var C;function Pe(){return C}function Te(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _e(e,t){t&&(A("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ee(e){te(e),e.drafts_.forEach(ke),e.drafts_=null}function te(e){e===C&&(C=e.parent_)}function he(e){return C=Te(C,e)}function ke(e){const t=e[y];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function de(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[y].modified_&&(ee(t),m(4)),N(e)&&(e=W(t,e),t.parent_||B(t,e)),t.patches_&&A("Patches").generateReplacementPatches_(n[y].base_,e,t.patches_,t.inversePatches_)):e=W(t,n,[]),ee(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ee?e:void 0}function W(e,t,n){if(X(t))return t;const r=t[y];if(!r)return K(t,(i,s)=>ye(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return B(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,f=!1;r.type_===3&&(s=new Set(i),i.clear(),f=!0),K(s,(c,a)=>ye(e,r,i,c,a,n,f)),B(e,i,!1),n&&e.patches_&&A("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ye(e,t,n,r,i,s,f){if(R(i)){const c=s&&t&&t.type_!==3&&!V(t.assigned_,r)?s.concat(r):void 0,a=W(e,i,c);if(me(n,r,a),R(a))e.canAutoFreeze_=!1;else return}else f&&n.add(i);if(N(i)&&!X(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;W(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&B(e,i)}}function B(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ie(t,n)}function xe(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Pe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=se;n&&(i=[r],s=T);const{revoke:f,proxy:c}=Proxy.revocable(i,s);return r.draft_=c,r.revoke_=f,c}var se={get(e,t){if(t===y)return e;const n=w(e);if(!V(n,t))return Me(e,n,t);const r=n[t];return e.finalized_||!N(r)?r:r===$(e.base_,t)?(Q(e),e.copy_[t]=re(r,e)):r},has(e,t){return t in w(e)},ownKeys(e){return Reflect.ownKeys(w(e))},set(e,t,n){const r=De(w(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=$(w(e),t),s=i==null?void 0:i[y];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Re(n,i)&&(n!==void 0||V(e.base_,t)))return!0;Q(e),ne(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return $(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Q(e),ne(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=w(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){m(11)},getPrototypeOf(e){return I(e.base_)},setPrototypeOf(){m(12)}},T={};K(se,(e,t)=>{T[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});T.deleteProperty=function(e,t){return T.set.call(this,e,t,void 0)};T.set=function(e,t,n){return se.set.call(this,e[0],t,n,e[0])};function $(e,t){const n=e[y];return(n?w(n):e)[t]}function Me(e,t,n){var i;const r=De(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function De(e,t){if(!(t in e))return;let n=I(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=I(n)}}function ne(e){e.modified_||(e.modified_=!0,e.parent_&&ne(e.parent_))}function Q(e){e.copy_||(e.copy_=v(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Le=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const f=this;return function(a=s,...u){return f.produce(a,h=>n.call(this,h,...u))}}typeof n!="function"&&m(6),r!==void 0&&typeof r!="function"&&m(7);let i;if(N(t)){const s=he(this),f=re(t,void 0);let c=!0;try{i=n(f),c=!1}finally{c?ee(s):te(s)}return _e(s,r),de(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Ee&&(i=void 0),this.autoFreeze_&&ie(i,!0),r){const s=[],f=[];A("Patches").generateReplacementPatches_(t,i,s,f),r(s,f)}return i}else m(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(f,...c)=>this.produceWithPatches(f,a=>t(a,...c));let r,i;return[this.produce(t,n,(f,c)=>{r=f,i=c}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){N(e)||m(8),R(e)&&(e=Ue(e));const t=he(this),n=re(e,void 0);return n[y].isManual_=!0,te(t),n}finishDraft(e,t){const n=e&&e[y];(!n||!n.isManual_)&&m(9);const{scope_:r}=n;return _e(r,t),de(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=A("Patches").applyPatches_;return R(e)?r(e,t):this.produce(e,i=>r(i,t))}};function re(e,t){const n=q(e)?A("MapSet").proxyMap_(e,t):H(e)?A("MapSet").proxySet_(e,t):xe(e,t);return(t?t.scope_:Pe()).drafts_.push(n),n}function Ue(e){return R(e)||m(10,e),Se(e)}function Se(e){if(!N(e)||X(e))return e;const t=e[y];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=v(e,t.scope_.immer_.useStrictShallowCopy_)}else n=v(e,!0);return K(n,(r,i)=>{me(n,r,Se(i))}),t&&(t.finalized_=!1),n}var E=new Le,Ge=E.produce;E.produceWithPatches.bind(E);E.setAutoFreeze.bind(E);E.setUseStrictShallowCopy.bind(E);E.applyPatches.bind(E);E.createDraft.bind(E);E.finishDraft.bind(E);const Be=e=>JSON.parse(JSON.stringify(e));function je(e){return typeof e=="function"}function Je(e){const t=Ne(e);return[t,r=>{t.value=Ge(t.value,i=>{if(je(r))r(i);else return r})}]}export{Je as a,Ke as b,Be as d,je as i,le as p,We as u};
